var transgator=transgator||{};transgator.utils={forEach:function(a,c,b){if(a&&"object"===typeof a)for(var d in a)a.hasOwnProperty(d)&&c.call(b,d,a[d])},getJSON:function(a){return new Promise(function(c,b){var d=new XMLHttpRequest;d.open("GET",a+".json");d.onload=function(){200==d.status?c(JSON.parse(d.response)):b(Error(d.statusText))};d.onerror=function(){b(Error("Network error."))};d.send()})},generateHashmap:function(a){var c=document.querySelectorAll("["+a.i18n_key+"]"),b={};transgator.utils.forEach(c,function(d,c){var e=
c.getAttribute(a.i18n_key),f=b[e]||[];f.push(c);b[e]=f});return b},setLang:function(a){document.documentElement.setAttribute("lang",a)}};transgator.run=function(a,c,b,d){b=transgator.utils.forEach;b(a,function(a,b){c[a]&&c[a].forEach(function(a){a.textContent=b})});transgator.utils.setLang(d)};var Transgator=function(a){this.config=a=a||{i18n_key:"data-i18n-key",i18n_dir:"./i18n/"};this.hashmap=transgator.utils.generateHashmap(a);return this};
Transgator.prototype.lang=function(a){if(void 0==a)console.error("Must specify a translation lang");else{var c=this;transgator.utils.getJSON(this.config.i18n_dir+a).then(function(b){transgator.run(b,c.hashmap,c.config,a)},function(a){console.error("Could not fetch translations")})}};
