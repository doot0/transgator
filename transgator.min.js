var transgator=transgator||{};transgator.utils={forEach:function(a,c,b){if(a&&"object"===typeof a)for(var d in a)a.hasOwnProperty(d)&&c.call(b,d,a[d])},getJSON:function(a,c){var b=new XMLHttpRequest;b.open("GET",a);b.onload=function(){200==b.status?c(null,JSON.parse(b.response)):c(Error(b.statusText))};b.onerror=function(){c(Error("Network error."))};b.send()},generateHashmap:function(a){var c=document.querySelectorAll("["+a.i18n_key+"]"),b={};transgator.utils.forEach(c,function(c,e){var f=e.getAttribute(a.i18n_key),g=b[f]||[];g.push(e);b[f]=g});return b},setLang:function(a){document.documentElement.setAttribute("lang",a)}};transgator.run=function(a,c,b,d){b=transgator.utils.forEach;b(a,function(a,b){c[a]&&c[a].forEach(function(a){a.textContent=b})});transgator.utils.setLang(d)};var Transgator=function(a){this.config=a=a||{i18n_key:"data-i18n-key",i18n_dir:"./i18n/"};this.hashmap=transgator.utils.generateHashmap(a);return this};Transgator.prototype.lang=function(a){if(void 0==a)console.error("Must specify a translation lang");else{var c=this;transgator.utils.getJSON(this.config.i18n_dir+a,function(b,d){if(b)return console.error("Could not fetch translations");transgator.run(d,c.hashmap,c.config,a)})}};
